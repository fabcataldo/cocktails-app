
<div class="card">
    <p-table
        #cocktailsTable
        [value]="pageFacade.loaded() ? pageFacade.cocktailsByLetterOrName()! : skeletonRows"
        [tableStyle]="{ 'min-width': '60rem' }"
        [loading]="pageFacade.loading()"
        [lazy]="true"
        [filters]="pageFacade.filters()"
        [rowHover]="true"
        (onLazyLoad)="pageFacade.searchByFilters($event)"
        showGridlines
    >
        <ng-template #header>
            <tr>
                <th style="width:22%">
                    <div class="flex items-center justify-between">
                        ID
                    </div>
                </th>
                <th style="width:22%">
                    <div class="flex items-center justify-between">
                        Image
                    </div>
                </th>
                <th style="width:22%">
                    <div class="flex items-center justify-between">
                        Name
                        <p-columnFilter type="text" field="name" ariaLabel="Filter Name"/>
                    </div>
                </th>
                <th style="width:22%">
                    <div class="flex items-center justify-between">
                        Category
                    </div>
                </th>
                <th style="width:22%">
                    <div class="flex items-center justify-between">
                        Alcoholic
                    </div>
                </th>
                <th style="width:22%">
                    <div class="flex items-center justify-between">
                        Ingredients
                    </div>
                </th>
                <th style="width:22%">
                    <div class="flex items-center justify-between">
                        Last Update
                    </div>
                </th>
            </tr>
        </ng-template>

        <ng-template #body let-cocktail>
            <tr>
                <td (click)="goToDetailPage(cocktail.id)">{{ cocktail.id }}</td>
                <td>
                    <div class="flex items-center gap-2">
                        <img
                            [src]="cocktail.thumbnail"
                            [alt]="cocktail.name"
                            class="w-4rem h-4rem border-round object-fit-cover"
                        />
                    </div>

                </td>
                <td>
                    <span class="font-medium text-900">{{ cocktail.name }}</span>
                </td>
                <td>
                    <p-tag 
                        [value]="cocktail.category" 
                        severity="info"
                        class="text-sm">
                    </p-tag>
                </td>
                <td class="text-center">
                    <p-tag 
                        [value]="cocktail.alcoholic === true ? 'Yes' : 'No'"
                        [severity]="cocktail.alcoholic === true ? 'success' : 'warning'"
                        class="text-sm">
                    </p-tag>
                </td>
                <td (click)="showCocktailIngredientsModal(cocktail)">
                    <span class="text-sm text-700">{{ cocktail.ingredients.join(', ') }}</span>
                </td>
                <td>
                    <span class="text-sm text-600">{{ cocktail.dateModified }}</span>
                </td>
            </tr>
        </ng-template>
        <ng-template #emptymessage>
            <tr>
                <td colspan="7" class="text-center p-4">
                    <div class="flex flex-column align-items-center">
                        <span class="text-xl text-500 mb-2">No cocktails found</span>
                        <span class="text-sm text-400">Try adjusting your filters</span>
                    </div>
                </td>
            </tr>
        </ng-template>
        <ng-template #footer>
            <tr>
                <td colspan="7" class="text-center p-3">
                    <div class="flex justify-content-center align-items-center gap-2">
                        <p-tag value="{{ pageFacade.alcoholicNoAlcoholicCocktails().alcoholic.length }}" severity="success"></p-tag>
                        <span class="text-sm">alcoholic and</span>
                        <p-tag value="{{ pageFacade.alcoholicNoAlcoholicCocktails().nonAlcoholic.length }}" severity="warning"></p-tag>
                        <span class="text-sm">non-alcoholic cocktails</span>
                    </div>
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>
